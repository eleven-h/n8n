# è‡ªåŠ¨æ‘˜è¦æ”¶è—æ–‡ç«  - é…ç½®æ­¥éª¤

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™ä¸ªå·¥ä½œæµå°†è‡ªåŠ¨ç›‘æ§æ‚¨çš„ RSS é˜…è¯»å™¨ï¼ˆå¦‚ Inoreaderï¼‰ï¼Œå½“æœ‰æ–°æ–‡ç« æ”¶è—æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨ AI ç”Ÿæˆæ‘˜è¦ï¼Œå¹¶ä¿å­˜åˆ° Notion æ•°æ®åº“ä¸­ï¼Œå®ç°**æ™ºèƒ½é˜…è¯»ç®¡ç†**ã€‚

## ğŸ”„ å·¥ä½œæµæµç¨‹

```
Inoreader RSS â†’ è¿‡æ»¤æ”¶è—æ–‡ç«  â†’ AI æ‘˜è¦ç”Ÿæˆ â†’ ä¿å­˜åˆ° Notion â†’ å‘é€é€šçŸ¥
```

## ğŸ“‹ å‰ç½®å‡†å¤‡

### 1. è·å– API å¯†é’¥

#### Inoreader API
1. è®¿é—® [Inoreader å¼€å‘è€…é¡µé¢](https://www.inoreader.com/developers)
2. åˆ›å»ºåº”ç”¨è·å– `App ID` å’Œ `App Key`
3. è®°å½•æ‚¨çš„ç”¨æˆ· IDï¼ˆåœ¨ Inoreader è®¾ç½®ä¸­æŸ¥çœ‹ï¼‰

#### OpenAI API
1. è®¿é—® [OpenAI API é¡µé¢](https://platform.openai.com/api-keys)
2. åˆ›å»ºæ–°çš„ API å¯†é’¥
3. ç¡®ä¿è´¦æˆ·æœ‰è¶³å¤Ÿçš„ä½™é¢

#### Notion API
1. è®¿é—® [Notion å¼€å‘è€…é¡µé¢](https://www.notion.so/my-integrations)
2. åˆ›å»ºæ–°çš„é›†æˆ
3. è·å– `Internal Integration Token`
4. åœ¨ç›®æ ‡æ•°æ®åº“ä¸­åˆ†äº«æƒé™ç»™é›†æˆ

### 2. åˆ›å»º Notion æ•°æ®åº“

åœ¨ Notion ä¸­åˆ›å»ºæ–°çš„æ•°æ®åº“ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| æ ‡é¢˜ | Title | æ–‡ç« æ ‡é¢˜ |
| é“¾æ¥ | URL | åŸæ–‡é“¾æ¥ |
| ä½œè€… | Text | æ–‡ç« ä½œè€… |
| å‘å¸ƒæ—¶é—´ | Date | å‘å¸ƒæ—¶é—´ |
| æ‘˜è¦ | Text | AI ç”Ÿæˆçš„æ‘˜è¦ |
| å…³é”®è¯ | Multi-select | æå–çš„å…³é”®è¯ |
| æ”¶è—æ—¶é—´ | Date | æ”¶è—æ—¶é—´ |
| çŠ¶æ€ | Select | å¤„ç†çŠ¶æ€ |

## ğŸš€ è¯¦ç»†é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šåˆ›å»º Inoreader è§¦å‘èŠ‚ç‚¹

#### 1.1 æ·»åŠ  Inoreader èŠ‚ç‚¹
- èŠ‚ç‚¹ç±»å‹ï¼š`Inoreader`
- æ“ä½œï¼š`Get All Articles`
- è®¤è¯ï¼šä½¿ç”¨æ‚¨çš„ Inoreader å‡­æ®

#### 1.2 é…ç½®å‚æ•°
```json
{
  "authentication": "inoreaderOAuth2",
  "operation": "getAllArticles",
  "streamId": "user/-/state/com.google/starred",
  "count": 10,
  "includeDeleted": false,
  "includeAttachments": false
}
```

#### 1.3 è®¾ç½®è§¦å‘å™¨
- è§¦å‘æ¨¡å¼ï¼š`Every 30 minutes`
- æˆ–è€…ä½¿ç”¨ `Schedule` èŠ‚ç‚¹è®¾ç½®å®šæ—¶æ‰§è¡Œ

### æ­¥éª¤ 2ï¼šè¿‡æ»¤æ”¶è—æ–‡ç« 

#### 2.1 æ·»åŠ  IF èŠ‚ç‚¹
- èŠ‚ç‚¹ç±»å‹ï¼š`IF`
- æ¡ä»¶ï¼šæ£€æŸ¥æ–‡ç« æ˜¯å¦ä¸ºæ–°æ”¶è—

#### 2.2 é…ç½®è¿‡æ»¤æ¡ä»¶
```javascript
// æ£€æŸ¥æ–‡ç« æ˜¯å¦å·²å¤„ç†è¿‡
const articleId = $json.id;
const existingArticles = await getNotionArticles(); // ä» Notion è·å–å·²å­˜åœ¨çš„æ–‡ç« 

return !existingArticles.some(article => article.articleId === articleId);
```

#### 2.3 è®¾ç½®è¾“å‡º
- å¦‚æœæ¡ä»¶ä¸ºçœŸï¼šç»§ç»­å¤„ç†
- å¦‚æœæ¡ä»¶ä¸ºå‡ï¼šè·³è¿‡ï¼ˆå¯é€‰ï¼šè®°å½•æ—¥å¿—ï¼‰

### æ­¥éª¤ 3ï¼šæ•°æ®é¢„å¤„ç†

#### 3.1 æ·»åŠ  Code èŠ‚ç‚¹
- èŠ‚ç‚¹ç±»å‹ï¼š`Code`
- è¯­è¨€ï¼šJavaScript

#### 3.2 ç¼–å†™é¢„å¤„ç†ä»£ç 
```javascript
// æå–æ–‡ç« ä¿¡æ¯
const articles = $input.all();

const processedArticles = articles.map(article => {
  return {
    title: article.title,
    link: article.link,
    author: article.author || 'Unknown',
    publishedDate: article.published,
    content: article.content || article.summary,
    articleId: article.id,
    feedTitle: article.feedTitle
  };
});

// è¿‡æ»¤æ‰å†…å®¹è¿‡çŸ­çš„æ–‡ç« 
const validArticles = processedArticles.filter(article => 
  article.content && article.content.length > 100
);

return validArticles;
```

### æ­¥éª¤ 4ï¼šAI æ‘˜è¦ç”Ÿæˆ

#### 4.1 æ·»åŠ  OpenAI èŠ‚ç‚¹
- èŠ‚ç‚¹ç±»å‹ï¼š`OpenAI`
- æ“ä½œï¼š`Chat`
- æ¨¡å‹ï¼š`gpt-3.5-turbo`

#### 4.2 é…ç½® AI å‚æ•°
```json
{
  "authentication": "openAiApi",
  "operation": "chat",
  "model": "gpt-3.5-turbo",
  "messages": [
    {
      "role": "system",
      "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–‡ç« æ‘˜è¦ä¸“å®¶ã€‚è¯·ä¸ºç»™å®šçš„æ–‡ç« ç”Ÿæˆç®€æ´ã€å‡†ç¡®çš„æ‘˜è¦ï¼Œå¹¶æå–3-5ä¸ªå…³é”®è¯ã€‚"
    },
    {
      "role": "user",
      "content": "è¯·ä¸ºä»¥ä¸‹æ–‡ç« ç”Ÿæˆæ‘˜è¦å’Œå…³é”®è¯ï¼š\n\næ ‡é¢˜ï¼š{{ $json.title }}\n\nå†…å®¹ï¼š{{ $json.content }}\n\nè¯·æŒ‰ä»¥ä¸‹æ ¼å¼è¿”å›ï¼š\næ‘˜è¦ï¼š[200å­—ä»¥å†…çš„æ‘˜è¦]\nå…³é”®è¯ï¼š[å…³é”®è¯1, å…³é”®è¯2, å…³é”®è¯3]"
    }
  ],
  "options": {
    "temperature": 0.7,
    "maxTokens": 500
  }
}
```

#### 4.3 å¤„ç† AI å“åº”
```javascript
// è§£æ AI å“åº”
const aiResponse = $json.choices[0].message.content;

// æå–æ‘˜è¦å’Œå…³é”®è¯
const summaryMatch = aiResponse.match(/æ‘˜è¦ï¼š(.+?)(?=\n|å…³é”®è¯ï¼š|$)/s);
const keywordsMatch = aiResponse.match(/å…³é”®è¯ï¼š\[(.+?)\]/);

const summary = summaryMatch ? summaryMatch[1].trim() : '';
const keywords = keywordsMatch ? 
  keywordsMatch[1].split(',').map(k => k.trim()) : [];

return {
  ...$input.first().json,
  summary: summary,
  keywords: keywords,
  aiProcessed: true
};
```

### æ­¥éª¤ 5ï¼šä¿å­˜åˆ° Notion

#### 5.1 æ·»åŠ  Notion èŠ‚ç‚¹
- èŠ‚ç‚¹ç±»å‹ï¼š`Notion`
- æ“ä½œï¼š`Create Page`
- æ•°æ®åº“ï¼šé€‰æ‹©æ‚¨åˆ›å»ºçš„æ•°æ®åº“

#### 5.2 é…ç½®é¡µé¢å±æ€§
```json
{
  "authentication": "notionApi",
  "operation": "createPage",
  "databaseId": "your-database-id",
  "properties": {
    "æ ‡é¢˜": {
      "title": [
        {
          "text": {
            "content": "{{ $json.title }}"
          }
        }
      ]
    },
    "é“¾æ¥": {
      "url": "{{ $json.link }}"
    },
    "ä½œè€…": {
      "rich_text": [
        {
          "text": {
            "content": "{{ $json.author }}"
          }
        }
      ]
    },
    "å‘å¸ƒæ—¶é—´": {
      "date": {
        "start": "{{ $json.publishedDate }}"
      }
    },
    "æ‘˜è¦": {
      "rich_text": [
        {
          "text": {
            "content": "{{ $json.summary }}"
          }
        }
      ]
    },
    "å…³é”®è¯": {
      "multi_select": "{{ $json.keywords.map(keyword => ({ name: keyword })) }}"
    },
    "æ”¶è—æ—¶é—´": {
      "date": {
        "start": "{{ new Date().toISOString() }}"
      }
    },
    "çŠ¶æ€": {
      "select": {
        "name": "å·²å¤„ç†"
      }
    }
  }
}
```

### æ­¥éª¤ 6ï¼šé”™è¯¯å¤„ç†å’Œé€šçŸ¥

#### 6.1 æ·»åŠ é”™è¯¯å¤„ç†
- åœ¨æ¯ä¸ªå…³é”®èŠ‚ç‚¹åæ·»åŠ  `Error Trigger` èŠ‚ç‚¹
- é…ç½®é”™è¯¯å¤„ç†é€»è¾‘

#### 6.2 æ·»åŠ é€šçŸ¥èŠ‚ç‚¹
```javascript
// æˆåŠŸé€šçŸ¥
const successMessage = `æˆåŠŸå¤„ç† ${$input.all().length} ç¯‡æ–‡ç« `;
console.log(successMessage);

// å¯é€‰ï¼šå‘é€åˆ°ä¼ä¸šå¾®ä¿¡æˆ–é‚®ä»¶
return {
  message: successMessage,
  processedCount: $input.all().length,
  timestamp: new Date().toISOString()
};
```

## âš™ï¸ é«˜çº§é…ç½®

### 1. æ‰¹é‡å¤„ç†ä¼˜åŒ–
```javascript
// åˆ†æ‰¹å¤„ç†æ–‡ç« ï¼Œé¿å… API é™åˆ¶
const batchSize = 5;
const articles = $input.all();
const batches = [];

for (let i = 0; i < articles.length; i += batchSize) {
  batches.push(articles.slice(i, i + batchSize));
}

return batches;
```

### 2. æ™ºèƒ½å»é‡
```javascript
// ä½¿ç”¨æ–‡ç« æ ‡é¢˜å’Œé“¾æ¥è¿›è¡Œå»é‡
const seen = new Set();
const uniqueArticles = $input.all().filter(article => {
  const key = `${article.title}-${article.link}`;
  if (seen.has(key)) {
    return false;
  }
  seen.add(key);
  return true;
});

return uniqueArticles;
```

### 3. å†…å®¹è´¨é‡è¿‡æ»¤
```javascript
// è¿‡æ»¤ä½è´¨é‡å†…å®¹
const qualityArticles = $input.all().filter(article => {
  // å†…å®¹é•¿åº¦æ£€æŸ¥
  if (!article.content || article.content.length < 200) {
    return false;
  }
  
  // æ ‡é¢˜è´¨é‡æ£€æŸ¥
  if (article.title.length < 10 || article.title.length > 100) {
    return false;
  }
  
  // æ’é™¤å¹¿å‘Šå’Œåƒåœ¾å†…å®¹
  const spamKeywords = ['å¹¿å‘Š', 'æ¨å¹¿', 'ç‚¹å‡»', 'èµšé’±'];
  if (spamKeywords.some(keyword => 
    article.title.includes(keyword) || article.content.includes(keyword)
  )) {
    return false;
  }
  
  return true;
});

return qualityArticles;
```

## ğŸ” æµ‹è¯•å’Œè°ƒè¯•

### 1. æµ‹è¯•å·¥ä½œæµ
1. **æ‰‹åŠ¨è§¦å‘**ï¼šç‚¹å‡»"æ‰§è¡Œå·¥ä½œæµ"æŒ‰é’®
2. **æ£€æŸ¥æ—¥å¿—**ï¼šæŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡ŒçŠ¶æ€
3. **éªŒè¯æ•°æ®**ï¼šæ£€æŸ¥ Notion æ•°æ®åº“ä¸­çš„æ•°æ®

### 2. å¸¸è§é—®é¢˜æ’æŸ¥
- **API é™åˆ¶**ï¼šæ£€æŸ¥ API è°ƒç”¨æ¬¡æ•°å’Œé¢‘ç‡
- **è®¤è¯é—®é¢˜**ï¼šéªŒè¯ API å¯†é’¥å’Œæƒé™
- **æ•°æ®æ ¼å¼**ï¼šæ£€æŸ¥æ•°æ®ç»“æ„å’Œå­—æ®µæ˜ å°„
- **ç½‘ç»œé—®é¢˜**ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

### 3. æ€§èƒ½ä¼˜åŒ–
- **å¹¶å‘æ§åˆ¶**ï¼šé™åˆ¶åŒæ—¶å¤„ç†çš„æ–‡ç« æ•°é‡
- **ç¼“å­˜æœºåˆ¶**ï¼šç¼“å­˜å·²å¤„ç†çš„æ–‡ç« ä¿¡æ¯
- **é”™è¯¯é‡è¯•**ï¼šé…ç½®å¤±è´¥é‡è¯•æœºåˆ¶

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. æ‰§è¡Œç»Ÿè®¡
- ç›‘æ§å·¥ä½œæµæ‰§è¡Œé¢‘ç‡
- ç»Ÿè®¡å¤„ç†çš„æ–‡ç« æ•°é‡
- è·Ÿè¸ª AI è°ƒç”¨æˆæœ¬

### 2. è´¨é‡è¯„ä¼°
- å®šæœŸæ£€æŸ¥æ‘˜è¦è´¨é‡
- æ”¶é›†ç”¨æˆ·åé¦ˆ
- ä¼˜åŒ– AI æç¤ºè¯

### 3. ç³»ç»Ÿç»´æŠ¤
- å®šæœŸæ›´æ–° API å¯†é’¥
- ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨
- å¤‡ä»½é‡è¦é…ç½®

## ğŸ¯ æ‰©å±•åŠŸèƒ½

### 1. å¤šè¯­è¨€æ”¯æŒ
```javascript
// æ£€æµ‹æ–‡ç« è¯­è¨€å¹¶é€‰æ‹©ç›¸åº”çš„ AI æ¨¡å‹
const language = detectLanguage(article.content);
const model = language === 'zh' ? 'gpt-3.5-turbo' : 'gpt-4';
```

### 2. æƒ…æ„Ÿåˆ†æ
```javascript
// æ·»åŠ æƒ…æ„Ÿåˆ†æåŠŸèƒ½
const sentiment = await analyzeSentiment(article.content);
return {
  ...article,
  sentiment: sentiment.score,
  sentimentLabel: sentiment.label
};
```

### 3. åˆ†ç±»æ ‡ç­¾
```javascript
// è‡ªåŠ¨åˆ†ç±»æ–‡ç« 
const category = await classifyArticle(article.content);
return {
  ...article,
  category: category
};
```

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™ä¸ªå·¥ä½œæµï¼Œæ‚¨å¯ä»¥ï¼š

1. **è‡ªåŠ¨åŒ–é˜…è¯»ç®¡ç†**ï¼šè‡ªåŠ¨æ”¶é›†å’Œå¤„ç†æ„Ÿå…´è¶£çš„æ–‡ç« 
2. **AI æ™ºèƒ½æ‘˜è¦**ï¼šå¿«é€Ÿè·å–æ–‡ç« æ ¸å¿ƒå†…å®¹
3. **çŸ¥è¯†åº“å»ºè®¾**ï¼šåœ¨ Notion ä¸­å»ºç«‹ä¸ªäººçŸ¥è¯†åº“
4. **æ•ˆç‡æå‡**ï¼šèŠ‚çœæ‰‹åŠ¨æ•´ç†æ–‡ç« çš„æ—¶é—´

**ä¸‹ä¸€æ­¥**ï¼šæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µä¼˜åŒ–å·¥ä½œæµï¼Œæ·»åŠ æ›´å¤šæ™ºèƒ½åŠŸèƒ½ï¼Œå¦‚ä¸ªæ€§åŒ–æ¨èã€é˜…è¯»è¿›åº¦è·Ÿè¸ªç­‰ã€‚
